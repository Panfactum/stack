apiVersion: v1
kind: Pod
metadata:
  annotations:
    config.linkerd.io/shutdown-grace-period: 29s
    linkerd.io/created-by: linkerd/proxy-injector edge-24.11.2
    linkerd.io/inject: enabled
    linkerd.io/proxy-version: edge-24.11.2
    linkerd.io/trust-root-sha256: 660933b76a7ef412a9960dab9f2c50a0c8de70895343726baa528e3f26f6d5ae
    panfactum: rocks
  creationTimestamp: "2025-03-28T00:44:02Z"
  labels:
    actor_type: source
    airbyte: job-pod
    attempt_id: "0"
    auto_id: ca15d6b5-c7ca-4c92-a482-00a3d689e950
    job_id: dfce251d-697a-4cd0-9fe0-6a98329c3549
    job_type: check
    linkerd.io/control-plane-ns: linkerd
    linkerd.io/workload-ns: airbyte
    panfactum.com/arm64-enabled: "true"
    panfactum.com/kyverno-mutated: "true"
    panfactum.com/spot-enabled: "true"
    workspace_id: 36e5eb99-864e-4f3f-9c3a-51b4bc5935ce
  name: source-asana-check-dfce251d-697a-4cd0-9fe0-6a98329c3549-0-ylmwy
  namespace: airbyte
  resourceVersion: "589019019"
  uid: 7c2f6a0c-0381-42ca-afa8-4c577716587a
spec:
  automountServiceAccountToken: true
  containers:
    - command:
        - sh
        - -c
        - |-
          trap "touch TERMINATED" EXIT
          /app/airbyte-app/bin/airbyte-connector-sidecar
      env:
        - name: CONTAINER_EPHEMERAL_STORAGE_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.ephemeral-storage
        - name: CONTAINER_EPHEMERAL_STORAGE_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.ephemeral-storage
        - name: GOMEMLIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_MEMORY_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.memory
        - name: CONTAINER_MEMORY_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_CPU_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.cpu
        - name: NODE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: POD_SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: NAMESPACE
          value: airbyte
        - name: POD_NAMESPACE
          value: airbyte
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: POD_TERMINATION_GRACE_PERIOD_SECONDS
          value: "30"
        - name: CONTAINER_IMAGE_REGISTRY
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com
        - name: CONTAINER_IMAGE_REPO
          value: docker-hub/airbyte/connector-sidecar:1.3.1
        - name: CONTAINER_IMAGE_TAG
          value: 1.3.1
        - name: CONTAINER_IMAGE
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/connector-sidecar:1.3.1
        - name: jack
          valueFrom:
            secretKeyRef:
              key: jack
              name: common-secrets-from-kube-policies
              optional: false
        - name: james
          value: lee
        - name: ACCEPTANCE_TEST_ENABLED
          value: "false"
        - name: AWS_SECRET_ACCESS_KEY
        - name: WORKLOAD_API_READ_TIMEOUT_SECONDS
          value: "300"
        - name: KEYCLOAK_CLIENT_ID
        - name: AWS_DEFAULT_REGION
          value: us-east-2
        - name: AIRBYTE_API_AUTH_HEADER_NAME
        - name: STORAGE_BUCKET_ACTIVITY_PAYLOAD
          value: airbyte-storage
        - name: MICRONAUT_ENVIRONMENTS
          value: worker-v2,control-plane,oss,local-secrets
        - name: AWS_ACCESS_KEY_ID
        - name: WORKLOAD_API_RETRY_DELAY_SECONDS
          value: "2"
        - name: DATA_PLANE_SERVICE_ACCOUNT_EMAIL
        - name: LOG_LEVEL
          value: INFO
        - name: INTERNAL_API_HOST
          value: http://airbyte-airbyte-server-svc:8001
        - name: WORKLOAD_API_CONNECT_TIMEOUT_SECONDS
          value: "30"
        - name: STORAGE_BUCKET_LOG
          value: airbyte-a8a23daa091f2e8a
        - name: WORKLOAD_API_MAX_RETRIES
          value: "5"
        - name: WORKLOAD_API_HOST
          value: http://airbyte-workload-api-server-svc:8007
        - name: STORAGE_BUCKET_STATE
          value: airbyte-a8a23daa091f2e8a
        - name: S3_PATH_STYLE_ACCESS
        - name: AIRBYTE_API_AUTH_HEADER_VALUE
        - name: DATA_PLANE_SERVICE_ACCOUNT_CREDENTIALS_PATH
        - name: CLOUD_STORAGE_APPENDER_THREADS
          value: "1"
        - name: STORAGE_BUCKET_WORKLOAD_OUTPUT
          value: airbyte-a8a23daa091f2e8a
        - name: KEYCLOAK_INTERNAL_REALM_ISSUER
        - name: STORAGE_TYPE
          value: S3
        - name: CONTROL_PLANE_AUTH_ENDPOINT
        - name: WORKLOAD_API_BEARER_TOKEN
          valueFrom:
            secretKeyRef:
              key: WORKLOAD_API_BEARER_TOKEN
              name: airbyte-airbyte-secrets
        - name: AWS_STS_REGIONAL_ENDPOINTS
          value: regional
        - name: AWS_ROLE_ARN
          value: arn:aws:iam::891377197483:role/airbyte-admin-20250328004031212400000002
        - name: AWS_WEB_IDENTITY_TOKEN_FILE
          value: /var/run/secrets/eks.amazonaws.com/serviceaccount/token
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/connector-sidecar:1.3.1
      imagePullPolicy: IfNotPresent
      name: connector-sidecar
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
        - mountPath: /config
          name: airbyte-config
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-988wx
          readOnly: true
        - mountPath: /var/run/secrets/eks.amazonaws.com/serviceaccount
          name: aws-iam-token
          readOnly: true
      workingDir: /config
    - command:
        - sh
        - -c
        - |-
          # fail loudly if entry point not set
          if [ -z "$AIRBYTE_ENTRYPOINT" ]; then
            echo "Entrypoint was not set! AIRBYTE_ENTRYPOINT must be set in the container."
            exit 127
          else
            echo "Using AIRBYTE_ENTRYPOINT: $AIRBYTE_ENTRYPOINT"
          fi
          
          # run connector in background and store PID
          (eval "$AIRBYTE_ENTRYPOINT check  --config /config/connectionConfiguration.json" > /config/jobOutput.json) &
          CHILD_PID=$!
          
          # run busy loop in background that checks for termination file and if present kills the connector operation and exits
          (while true; do if [ -f TERMINATED ]; then kill $CHILD_PID; exit 0; fi; sleep 10; done) &
          
          # wait on connector operation
          wait $CHILD_PID
          EXIT_CODE=$?
          
          # write its exit code to a file for the sidecar
          echo $EXIT_CODE > TEMP_EXIT_CODE.txt
          # use a swap file to make creation and writing atomic
          mv TEMP_EXIT_CODE.txt exitCode.txt
          
          # propagate connector exit code by assuming it
          exit $EXIT_CODE
      env:
        - name: CONTAINER_EPHEMERAL_STORAGE_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.ephemeral-storage
        - name: CONTAINER_EPHEMERAL_STORAGE_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.ephemeral-storage
        - name: GOMEMLIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_MEMORY_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.memory
        - name: CONTAINER_MEMORY_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_CPU_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.cpu
        - name: NODE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: POD_SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: NAMESPACE
          value: airbyte
        - name: POD_NAMESPACE
          value: airbyte
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: POD_TERMINATION_GRACE_PERIOD_SECONDS
          value: "30"
        - name: CONTAINER_IMAGE_REGISTRY
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com
        - name: CONTAINER_IMAGE_REPO
          value: docker-hub/airbyte/source-asana:1.3.0
        - name: CONTAINER_IMAGE_TAG
          value: 1.3.0
        - name: CONTAINER_IMAGE
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/source-asana:1.3.0
        - name: jack
          valueFrom:
            secretKeyRef:
              key: jack
              name: common-secrets-from-kube-policies
              optional: false
        - name: james
          value: lee
        - name: AIRBYTE_VERSION
          value: 1.3.1
        - name: AIRBYTE_ROLE
        - name: DEPLOYMENT_MODE
          value: OSS
        - name: USE_RUNTIME_SECRET_PERSISTENCE
          value: "false"
        - name: OPERATION_TYPE
          value: check
        - name: WORKLOAD_ID
          value: d0243522-dccf-4978-8ba0-37ed47a0bdbf_dfce251d-697a-4cd0-9fe0-6a98329c3549_0_check
        - name: AWS_STS_REGIONAL_ENDPOINTS
          value: regional
        - name: AWS_DEFAULT_REGION
          value: us-east-2
        - name: AWS_REGION
          value: us-east-2
        - name: AWS_ROLE_ARN
          value: arn:aws:iam::891377197483:role/airbyte-admin-20250328004031212400000002
        - name: AWS_WEB_IDENTITY_TOKEN_FILE
          value: /var/run/secrets/eks.amazonaws.com/serviceaccount/token
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/source-asana:1.3.0
      imagePullPolicy: IfNotPresent
      name: main
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
        - mountPath: /config
          name: airbyte-config
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-988wx
          readOnly: true
        - mountPath: /var/run/secrets/eks.amazonaws.com/serviceaccount
          name: aws-iam-token
          readOnly: true
      workingDir: /config
  dnsPolicy: ClusterFirst
  enableServiceLinks: true
  initContainers:
    - env:
        - name: CONTAINER_EPHEMERAL_STORAGE_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.ephemeral-storage
        - name: CONTAINER_EPHEMERAL_STORAGE_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.ephemeral-storage
        - name: GOMEMLIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_MEMORY_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.memory
        - name: CONTAINER_MEMORY_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_CPU_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.cpu
        - name: NODE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: POD_SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: NAMESPACE
          value: airbyte
        - name: POD_NAMESPACE
          value: airbyte
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: POD_TERMINATION_GRACE_PERIOD_SECONDS
          value: "30"
        - name: CONTAINER_IMAGE_REGISTRY
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com
        - name: CONTAINER_IMAGE_REPO
          value: github/linkerd/proxy:edge-24.11.2
        - name: CONTAINER_IMAGE_TAG
          value: edge-24.11.2
        - name: CONTAINER_IMAGE
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com/github/linkerd/proxy:edge-24.11.2
        - name: jack
          valueFrom:
            secretKeyRef:
              key: jack
              name: common-secrets-from-kube-policies
              optional: false
        - name: james
          value: lee
        - name: _pod_name
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: _pod_ns
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: _pod_nodeName
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: LINKERD2_PROXY_SHUTDOWN_ENDPOINT_ENABLED
          value: "false"
        - name: LINKERD2_PROXY_LOG
          value: warn,linkerd=warn,linkerd2_proxy=warn,[{headers}]=off,[{request}]=off
        - name: LINKERD2_PROXY_LOG_FORMAT
          value: json
        - name: LINKERD2_PROXY_DESTINATION_SVC_ADDR
          value: linkerd-dst-headless.linkerd.svc.cluster.local.:8086
        - name: LINKERD2_PROXY_DESTINATION_PROFILE_NETWORKS
          value: 10.0.0.0/8,100.64.0.0/10,172.16.0.0/12,192.168.0.0/16,fd00::/8
        - name: LINKERD2_PROXY_POLICY_SVC_ADDR
          value: linkerd-policy.linkerd.svc.cluster.local.:8090
        - name: LINKERD2_PROXY_POLICY_WORKLOAD
          value: |
            {"ns":"$(_pod_ns)", "pod":"$(_pod_name)"}
        - name: LINKERD2_PROXY_INBOUND_DEFAULT_POLICY
          value: all-unauthenticated
        - name: LINKERD2_PROXY_POLICY_CLUSTER_NETWORKS
          value: 10.0.0.0/8,100.64.0.0/10,172.16.0.0/12,192.168.0.0/16,fd00::/8
        - name: LINKERD2_PROXY_CONTROL_STREAM_INITIAL_TIMEOUT
          value: 3s
        - name: LINKERD2_PROXY_CONTROL_STREAM_IDLE_TIMEOUT
          value: 5m
        - name: LINKERD2_PROXY_CONTROL_STREAM_LIFETIME
          value: 1h
        - name: LINKERD2_PROXY_INBOUND_CONNECT_TIMEOUT
          value: 100ms
        - name: LINKERD2_PROXY_OUTBOUND_CONNECT_TIMEOUT
          value: 1000ms
        - name: LINKERD2_PROXY_OUTBOUND_DISCOVERY_IDLE_TIMEOUT
          value: 5s
        - name: LINKERD2_PROXY_INBOUND_DISCOVERY_IDLE_TIMEOUT
          value: 90s
        - name: LINKERD2_PROXY_CONTROL_LISTEN_ADDR
          value: 0.0.0.0:4190
        - name: LINKERD2_PROXY_ADMIN_LISTEN_ADDR
          value: 0.0.0.0:4191
        - name: LINKERD2_PROXY_OUTBOUND_LISTEN_ADDR
          value: 127.0.0.1:4140
        - name: LINKERD2_PROXY_OUTBOUND_LISTEN_ADDRS
          value: 127.0.0.1:4140
        - name: LINKERD2_PROXY_INBOUND_LISTEN_ADDR
          value: 0.0.0.0:4143
        - name: LINKERD2_PROXY_INBOUND_IPS
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIPs
        - name: LINKERD2_PROXY_INBOUND_PORTS
        - name: LINKERD2_PROXY_DESTINATION_PROFILE_SUFFIXES
          value: svc.cluster.local.
        - name: LINKERD2_PROXY_INBOUND_ACCEPT_KEEPALIVE
          value: 10000ms
        - name: LINKERD2_PROXY_OUTBOUND_CONNECT_KEEPALIVE
          value: 10000ms
        - name: LINKERD2_PROXY_INBOUND_ACCEPT_USER_TIMEOUT
          value: 30s
        - name: LINKERD2_PROXY_OUTBOUND_CONNECT_USER_TIMEOUT
          value: 30s
        - name: LINKERD2_PROXY_INBOUND_SERVER_HTTP2_KEEP_ALIVE_INTERVAL
          value: 10s
        - name: LINKERD2_PROXY_INBOUND_SERVER_HTTP2_KEEP_ALIVE_TIMEOUT
          value: 3s
        - name: LINKERD2_PROXY_OUTBOUND_SERVER_HTTP2_KEEP_ALIVE_INTERVAL
          value: 10s
        - name: LINKERD2_PROXY_OUTBOUND_SERVER_HTTP2_KEEP_ALIVE_TIMEOUT
          value: 3s
        - name: LINKERD2_PROXY_INBOUND_PORTS_DISABLE_PROTOCOL_DETECTION
          value: 25,587,3306,4222,6222,4444,5432,6379,9300,11211
        - name: LINKERD2_PROXY_DESTINATION_CONTEXT
          value: |
            {"ns":"$(_pod_ns)", "nodeName":"$(_pod_nodeName)", "pod":"$(_pod_name)"}
        - name: _pod_sa
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: _l5d_ns
          value: linkerd
        - name: _l5d_trustdomain
          value: cluster.local
        - name: LINKERD2_PROXY_IDENTITY_DIR
          value: /var/run/linkerd/identity/end-entity
        - name: LINKERD2_PROXY_IDENTITY_TRUST_ANCHORS
          value: |
            -----BEGIN CERTIFICATE-----
            MIIC2DCCAn+gAwIBAgIUPPDfyCsdzHt9K6SLZ8m8LSt2Y9kwCgYIKoZIzj0EAwIw
            ZTESMBAGA1UEChMJcGFuZmFjdHVtMRQwEgYDVQQLEwtlbmdpbmVlcmluZzE5MDcG
            A1UEAxMwaHR0cDovL3ZhdWx0LWFjdGl2ZS52YXVsdC5zdmMuY2x1c3Rlci5sb2Nh
            bDo4MjAwMB4XDTI0MDQwNTE4MDI1MloXDTM0MDQwMzE4MDMyMlowZTESMBAGA1UE
            ChMJcGFuZmFjdHVtMRQwEgYDVQQLEwtlbmdpbmVlcmluZzE5MDcGA1UEAxMwaHR0
            cDovL3ZhdWx0LWFjdGl2ZS52YXVsdC5zdmMuY2x1c3Rlci5sb2NhbDo4MjAwMFkw
            EwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEPc+c7MwkslrmdkV2ST0t059KifOIT4RL
            8qdRC81MOvpXw67euaiGXKa+92iXvPHeQz62q1sNn/j4rvrRZvk9o6OCAQswggEH
            MA4GA1UdDwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBTUJYww
            c8HQTlaa1LFRtrnRkOwnOzAfBgNVHSMEGDAWgBTUJYwwc8HQTlaa1LFRtrnRkOwn
            OzBWBggrBgEFBQcBAQRKMEgwRgYIKwYBBQUHMAKGOmh0dHA6Ly92YXVsdC1hY3Rp
            dmUudmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWw6ODIwMC92MS9wa2kvY2EwTAYDVR0f
            BEUwQzBBoD+gPYY7aHR0cDovL3ZhdWx0LWFjdGl2ZS52YXVsdC5zdmMuY2x1c3Rl
            ci5sb2NhbDo4MjAwL3YxL3BraS9jcmwwCgYIKoZIzj0EAwIDRwAwRAIgHxIPsNAE
            ifUwL4OaKk9qS1lrEun5YzhW66lO9r9AZpwCIFIdn/bErTpyB9fEoxMi2LszRcOO
            KHQx5O0fI4358fxE
            -----END CERTIFICATE-----
        - name: LINKERD2_PROXY_IDENTITY_TOKEN_FILE
          value: /var/run/secrets/tokens/linkerd-identity-token
        - name: LINKERD2_PROXY_IDENTITY_SVC_ADDR
          value: linkerd-identity-headless.linkerd.svc.cluster.local.:8080
        - name: LINKERD2_PROXY_IDENTITY_LOCAL_NAME
          value: $(_pod_sa).$(_pod_ns).serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_IDENTITY_SVC_NAME
          value: linkerd-identity.linkerd.serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_DESTINATION_SVC_NAME
          value: linkerd-destination.linkerd.serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_POLICY_SVC_NAME
          value: linkerd-destination.linkerd.serviceaccount.identity.linkerd.cluster.local
        - name: LINKERD2_PROXY_SHUTDOWN_GRACE_PERIOD
          value: 29000ms
        - name: AWS_STS_REGIONAL_ENDPOINTS
          value: regional
        - name: AWS_DEFAULT_REGION
          value: us-east-2
        - name: AWS_REGION
          value: us-east-2
        - name: AWS_ROLE_ARN
          value: arn:aws:iam::891377197483:role/airbyte-admin-20250328004031212400000002
        - name: AWS_WEB_IDENTITY_TOKEN_FILE
          value: /var/run/secrets/eks.amazonaws.com/serviceaccount/token
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/github/linkerd/proxy:edge-24.11.2
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 3
        httpGet:
          path: /live
          port: 4191
          scheme: HTTP
        initialDelaySeconds: 10
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      name: linkerd-proxy
      ports:
        - containerPort: 4143
          name: linkerd-proxy
          protocol: TCP
        - containerPort: 4191
          name: linkerd-admin
          protocol: TCP
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /ready
          port: 4191
          scheme: HTTP
        initialDelaySeconds: 2
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources:
        limits:
          memory: 200Mi
        requests:
          memory: 10Mi
      restartPolicy: Always
      securityContext:
        allowPrivilegeEscalation: false
        readOnlyRootFilesystem: true
        runAsNonRoot: true
        runAsUser: 2102
        seccompProfile:
          type: RuntimeDefault
      startupProbe:
        failureThreshold: 120
        httpGet:
          path: /ready
          port: 4191
          scheme: HTTP
        periodSeconds: 1
        successThreshold: 1
        timeoutSeconds: 1
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
        - mountPath: /var/run/linkerd/identity/end-entity
          name: linkerd-identity-end-entity
        - mountPath: /var/run/secrets/tokens
          name: linkerd-identity-token
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-988wx
          readOnly: true
        - mountPath: /var/run/secrets/eks.amazonaws.com/serviceaccount
          name: aws-iam-token
          readOnly: true
    - env:
        - name: CONTAINER_EPHEMERAL_STORAGE_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.ephemeral-storage
        - name: CONTAINER_EPHEMERAL_STORAGE_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.ephemeral-storage
        - name: GOMEMLIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_MEMORY_LIMIT
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: limits.memory
        - name: CONTAINER_MEMORY_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.memory
        - name: CONTAINER_CPU_REQUEST
          valueFrom:
            resourceFieldRef:
              divisor: "0"
              resource: requests.cpu
        - name: NODE_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.hostIP
        - name: NODE_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.nodeName
        - name: POD_SERVICE_ACCOUNT
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: spec.serviceAccountName
        - name: NAMESPACE
          value: airbyte
        - name: POD_NAMESPACE
          value: airbyte
        - name: POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: POD_IP
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: status.podIP
        - name: POD_TERMINATION_GRACE_PERIOD_SECONDS
          value: "30"
        - name: CONTAINER_IMAGE_REGISTRY
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com
        - name: CONTAINER_IMAGE_REPO
          value: docker-hub/airbyte/workload-init-container:1.3.1
        - name: CONTAINER_IMAGE_TAG
          value: 1.3.1
        - name: CONTAINER_IMAGE
          value: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/workload-init-container:1.3.1
        - name: jack
          valueFrom:
            secretKeyRef:
              key: jack
              name: common-secrets-from-kube-policies
              optional: false
        - name: james
          value: lee
        - name: PUBLISH_METRICS
          value: "false"
        - name: ACCEPTANCE_TEST_ENABLED
          value: "false"
        - name: SECRET_PERSISTENCE
          value: TESTING_CONFIG_DB_TABLE
        - name: SECRET_STORE_GCP_PROJECT_ID
        - name: AIRBYTE_API_AUTH_HEADER_NAME
        - name: MICRONAUT_ENVIRONMENTS
          value: worker-v2,control-plane,oss,local-secrets
        - name: DD_INTEGRATION_GOOGLE_HTTP_CLIENT_ENABLED
          value: "false"
        - name: WORKLOAD_API_RETRY_DELAY_SECONDS
          value: "2"
        - name: DD_SERVICE
          value: airbyte-workload-init-container
        - name: LOG_LEVEL
          value: INFO
        - name: INTERNAL_API_HOST
          value: http://airbyte-airbyte-server-svc:8001
        - name: WORKLOAD_API_CONNECT_TIMEOUT_SECONDS
          value: "30"
        - name: DD_DOGSTATSD_PORT
        - name: WORKLOAD_API_HOST
          value: http://airbyte-workload-api-server-svc:8007
        - name: AIRBYTE_API_AUTH_HEADER_VALUE
        - name: DD_INTEGRATION_NETTY_ENABLED
          value: "false"
        - name: VAULT_PREFIX
        - name: DATABASE_USER
          value: v-kubernet-superuse-Im3hr3AQsUwyy0hWpqsF-1743103208
        - name: DATABASE_PASSWORD
          value: UIcuekdaY0eLvoeH-8Cg
        - name: WORKLOAD_API_READ_TIMEOUT_SECONDS
          value: "300"
        - name: KEYCLOAK_CLIENT_ID
        - name: DATABASE_URL
          value: jdbc:postgresql://pg-5cbc-pooler-rw.airbyte:5432/app
        - name: AWS_KMS_KEY_ARN
        - name: METRIC_CLIENT
        - name: DATA_PLANE_SERVICE_ACCOUNT_EMAIL
        - name: FEATURE_FLAG_CLIENT
        - name: AB_AZURE_KEY_VAULT_VAULT_URL
        - name: AB_AZURE_KEY_VAULT_TENANT_ID
        - name: DD_INTEGRATION_NETTY_4_1_ENABLED
          value: "false"
        - name: DD_INTEGRATION_HTTPURLCONNECTION_ENABLED
          value: "false"
        - name: DD_INTEGRATION_URLCONNECTION_ENABLED
          value: "false"
        - name: WORKLOAD_API_MAX_RETRIES
          value: "5"
        - name: AB_AZURE_KEY_VAULT_TAGS
        - name: VAULT_ADDRESS
        - name: FEATURE_FLAG_BASEURL
        - name: DD_AGENT_HOST
        - name: LAUNCHDARKLY_KEY
        - name: DD_INTEGRATION_GRPC_ENABLED
          value: "false"
        - name: DD_INTEGRATION_GRPC_CLIENT_ENABLED
          value: "false"
        - name: S3_PATH_STYLE_ACCESS
        - name: AWS_SECRET_MANAGER_SECRET_TAGS
        - name: DATA_PLANE_SERVICE_ACCOUNT_CREDENTIALS_PATH
        - name: AWS_SECRET_MANAGER_REGION
        - name: FEATURE_FLAG_PATH
          value: /flags
        - name: CLOUD_STORAGE_APPENDER_THREADS
          value: "1"
        - name: OTEL_COLLECTOR_ENDPOINT
        - name: KEYCLOAK_INTERNAL_REALM_ISSUER
        - name: DD_INTEGRATION_GRPC_SERVER_ENABLED
          value: "false"
        - name: CONTROL_PLANE_AUTH_ENDPOINT
        - name: WORKLOAD_API_BEARER_TOKEN
          valueFrom:
            secretKeyRef:
              key: WORKLOAD_API_BEARER_TOKEN
              name: airbyte-airbyte-secrets
        - name: USE_RUNTIME_SECRET_PERSISTENCE
          value: "false"
        - name: OPERATION_TYPE
          value: check
        - name: WORKLOAD_ID
          value: d0243522-dccf-4978-8ba0-37ed47a0bdbf_dfce251d-697a-4cd0-9fe0-6a98329c3549_0_check
        - name: AWS_STS_REGIONAL_ENDPOINTS
          value: regional
        - name: AWS_DEFAULT_REGION
          value: us-east-2
        - name: AWS_REGION
          value: us-east-2
        - name: AWS_ROLE_ARN
          value: arn:aws:iam::891377197483:role/airbyte-admin-20250328004031212400000002
        - name: AWS_WEB_IDENTITY_TOKEN_FILE
          value: /var/run/secrets/eks.amazonaws.com/serviceaccount/token
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/workload-init-container:1.3.1
      imagePullPolicy: IfNotPresent
      name: init
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
        - mountPath: /config
          name: airbyte-config
        - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
          name: kube-api-access-988wx
          readOnly: true
        - mountPath: /var/run/secrets/eks.amazonaws.com/serviceaccount
          name: aws-iam-token
          readOnly: true
      workingDir: /config
  nodeName: ip-10-0-219-12.us-east-2.compute.internal
  preemptionPolicy: PreemptLowerPriority
  priority: 0
  priorityClassName: default
  restartPolicy: Never
  schedulerName: panfactum
  securityContext: {}
  serviceAccount: airbyte-admin
  serviceAccountName: airbyte-admin
  terminationGracePeriodSeconds: 30
  tolerations:
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
    - effect: NoSchedule
      key: arm64
      operator: Equal
      value: "true"
    - effect: NoSchedule
      key: spot
      operator: Equal
      value: "true"
  volumes:
    - name: aws-iam-token
      projected:
        defaultMode: 420
        sources:
          - serviceAccountToken:
              audience: sts.amazonaws.com
              expirationSeconds: 86400
              path: token
    - emptyDir:
        medium: Memory
      name: airbyte-config
    - name: kube-api-access-988wx
      projected:
        defaultMode: 420
        sources:
          - serviceAccountToken:
              expirationSeconds: 3607
              path: token
          - configMap:
              items:
                - key: ca.crt
                  path: ca.crt
              name: kube-root-ca.crt
          - downwardAPI:
              items:
                - fieldRef:
                    apiVersion: v1
                    fieldPath: metadata.namespace
                  path: namespace
    - emptyDir:
        medium: Memory
      name: linkerd-identity-end-entity
    - name: linkerd-identity-token
      projected:
        defaultMode: 420
        sources:
          - serviceAccountToken:
              audience: identity.l5d.io
              expirationSeconds: 86400
              path: linkerd-identity-token
status:
  conditions:
    - lastProbeTime: null
      lastTransitionTime: "2025-03-28T00:45:07Z"
      status: "False"
      type: PodReadyToStartContainers
    - lastProbeTime: null
      lastTransitionTime: "2025-03-28T00:44:22Z"
      reason: PodCompleted
      status: "True"
      type: Initialized
    - lastProbeTime: null
      lastTransitionTime: "2025-03-28T00:45:01Z"
      reason: PodCompleted
      status: "False"
      type: Ready
    - lastProbeTime: null
      lastTransitionTime: "2025-03-28T00:45:01Z"
      reason: PodCompleted
      status: "False"
      type: ContainersReady
    - lastProbeTime: null
      lastTransitionTime: "2025-03-28T00:44:02Z"
      status: "True"
      type: PodScheduled
  containerStatuses:
    - containerID: containerd://738f56fb1ab68a6b8869767d08dd1eb5e9086582db82f06f44b69084507596be
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/connector-sidecar:1.3.1
      imageID: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/connector-sidecar@sha256:8726f6710fcc649d85027a775cc228433db126cf5bd9cd6d6e9d41d5af941b8b
      lastState: {}
      name: connector-sidecar
      ready: false
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://738f56fb1ab68a6b8869767d08dd1eb5e9086582db82f06f44b69084507596be
          exitCode: 0
          finishedAt: "2025-03-28T00:45:06Z"
          reason: Completed
          startedAt: "2025-03-28T00:44:30Z"
    - containerID: containerd://d32004193625da8d836e893e21d27d86c2f3415a34df57b311dcb7561532c6ba
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/source-asana:1.3.0
      imageID: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/source-asana@sha256:1777ee61f11ee0e9c59fc839017848ab89f97035bee51a81d590b9320cdcc233
      lastState: {}
      name: main
      ready: false
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://d32004193625da8d836e893e21d27d86c2f3415a34df57b311dcb7561532c6ba
          exitCode: 0
          finishedAt: "2025-03-28T00:44:58Z"
          reason: Completed
          startedAt: "2025-03-28T00:44:46Z"
  hostIP: 10.0.219.12
  hostIPs:
    - ip: 10.0.219.12
  initContainerStatuses:
    - containerID: containerd://be42888df239a5f7d923fa8b604a0c6b08f362c125b355bf5db2330c6f06d0d9
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/github/linkerd/proxy:edge-24.11.2
      imageID: 891377197483.dkr.ecr.us-east-2.amazonaws.com/github/linkerd/proxy@sha256:724cee0d77166ad7d0e7b9e72f19a63ea31214645e481788be6b09c934ba962e
      lastState: {}
      name: linkerd-proxy
      ready: false
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://be42888df239a5f7d923fa8b604a0c6b08f362c125b355bf5db2330c6f06d0d9
          exitCode: 0
          finishedAt: "2025-03-28T00:45:06Z"
          reason: Completed
          startedAt: "2025-03-28T00:44:03Z"
    - containerID: containerd://0336c3ec6f65093ab8907b21f005f282be4b1607cbbe5e5293038546ee5274cb
      image: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/workload-init-container:1.3.1
      imageID: 891377197483.dkr.ecr.us-east-2.amazonaws.com/docker-hub/airbyte/workload-init-container@sha256:e6e6d423134db694ab9b0871527dde0061e13a0733add965a753e2c195487fc3
      lastState: {}
      name: init
      ready: true
      restartCount: 0
      started: false
      state:
        terminated:
          containerID: containerd://0336c3ec6f65093ab8907b21f005f282be4b1607cbbe5e5293038546ee5274cb
          exitCode: 0
          finishedAt: "2025-03-28T00:44:22Z"
          reason: Completed
          startedAt: "2025-03-28T00:44:12Z"
  phase: Succeeded
  podIP: 10.0.255.127
  podIPs:
    - ip: 10.0.255.127
  qosClass: Burstable
  startTime: "2025-03-28T00:44:02Z"
