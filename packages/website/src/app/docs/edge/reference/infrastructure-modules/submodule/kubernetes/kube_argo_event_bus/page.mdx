import ModuleHeader from "../../../ModuleHeader";

{/* lint disable no-duplicate-headings */}

# Argo Event Bus

<ModuleHeader name="kube_argo_event_bus" sourceHref="https://github.com/Panfactum/stack/tree/__PANFACTUM_VERSION_EDGE__/packages/infrastructure/kube_argo_event_bus" status="alpha" type="submodule" />

Deploys an [EventBus](https://argoproj.github.io/argo-events/concepts/eventbus/) resource as a part of
the [Argo Events architecture](https://argoproj.github.io/argo-events/concepts/architecture/).

The EventBus is a set of [NATS](https://nats.io/) nodes that temporarily store inbound events
from [EventSources](https://argoproj.github.io/argo-events/concepts/event_source/) before
distributing them via [Sensors](https://argoproj.github.io/argo-events/concepts/sensor/).

## Usage

A few notes for the proper usage of an EventBus:

* An EventBus is a namespaced resource, and you can have **at most one** per namespace.

* For every namespace where you want to deploy EventSources and Sensors, you must have
  an EventBus deployed.

* Updates to the EventBus configuration will cause the EventBus to be destroyed and recreated
  due to [this issue](https://github.com/argoproj/argo-events/issues/3133). This will
  cause downtime, so plan accordingly.

## Providers

The following providers are needed by this module:

* [kubectl](#requirement_kubectl) (2.0.4)

* [kubernetes](https://registry.terraform.io/providers/hashicorp/kubernetes/2.27.0/docs) (2.27.0)

* [random](https://registry.terraform.io/providers/hashicorp/random/3.6.0/docs) (3.6.0)

## Required Inputs

The following input variables are required:

### <a name="input_namespace" /> [namespace](#input_namespace)

Description: The namespace to deploy the EventBus into.

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_event_bus_initial_volume_size" /> [event\_bus\_initial\_volume\_size](#input_event_bus_initial_volume_size)

Description: The initial volume size to use for each node in the event bus

Type: `string`

Default: `"1Gi"`

### <a name="input_event_bus_storage_class_name" /> [event\_bus\_storage\_class\_name](#input_event_bus_storage_class_name)

Description: The storage class to use for the event bus

Type: `string`

Default: `"ebs-standard"`

### <a name="input_log_level" /> [log\_level](#input_log_level)

Description: The log level for the argo pods

Type: `string`

Default: `"info"`

### <a name="input_vpa_enabled" /> [vpa\_enabled](#input_vpa_enabled)

Description: Whether the VPA resources should be enabled

Type: `bool`

Default: `false`

## Outputs

No outputs.

{/* lint enable no-duplicate-headings */}
