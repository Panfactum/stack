---
import { clsx } from "clsx";

import PanfactumLogo from "@/components/icons/panfactum-logo.svg";

import SubSection from "../../layouts/SubSection.astro";

const TABLE_DATA = [
  ["", "DIY", "Consultant / Agency", "Panfactum"],
  [
    "Cost",
    "1+ full-time employee",
    "Hidden and highly variable",
    "Starting at < $3,000 / month",
  ],
  [
    "Time to Launch",
    "3-12 months (highly variable)",
    "3-12 months (highly variable)",
    "< 30 days",
  ],
  [
    "Quality",
    "Unproven",
    "Unproven",
    "Open-source, battle-tested, framework w/ 100+ modules",
  ],
  [
    "Initial Commitment",
    "High",
    "Medium (highly variable)",
    "45-day, no-questions-asked refund period",
  ],
  [
    "Spend Reduction",
    "None",
    "None / Limited",
    "60%+ infrastructure savings or we pay the difference",
  ],
  [
    "Expert Support",
    "None",
    "Limited",
    "On-call support from the engineers behind Panfactum with guaranteed SLAs",
  ],
  [
    "Maintenance",
    "100% up to you",
    "On request",
    "Proactive, automatic upgrades",
  ],
  [
    "Extensibility",
    "100% up to you",
    "Proprietary, closed-source",
    "Extensible architecture built exclusively on open protocols and open source software",
  ],
  [
    "Documentation",
    "100% up to you",
    "None / Limited",
    "100s of pages including architecture reference and decision documents",
  ],
  [
    "Audit / Compliance",
    "100% up to you",
    "Extra costs",
    "Alignment with industry-standard compliance frameworks from day one",
  ],
];

const cellStyle = "flex min-h-16 min-w-44 sm:min-w-56 md:min-w-64 items-center px-4";
const getRowStyleByIndex = (index: number) =>
  index % 2 !== 0 ? "bg-primary" : "bg-tertiary";
const getPFRowStyleByIndex = (index: number) =>
  index % 2 !== 0 ? "bg-accent" : "bg-accent-dark";
---

<SubSection
  title="How We Compare"
>
  <div
    class="dark:border-secondary w-fit max-w-[90vw] overflow-x-scroll rounded-lg dark:border"
  >
    {
      TABLE_DATA.map((data, rowNum) => {
        if (rowNum == 0) {
          return (
            <div class="flex">
              {data.map((companyName, colNum) => {
                const isFirstCol = colNum === 0;
                const isLastCol = colNum === 3;
                return (
                  <div
                    class:list={clsx(
                      cellStyle,
                      "text-display-xs justify-center px-0 py-0.5 font-bold",
                      isFirstCol
                        ? "lg:basis-1/3"
                        : "grow lg:grow-0 lg:basis-1/4",
                      isLastCol ? "bg-accent-dark" : "bg-tertiary",
                      !isLastCol && !isFirstCol && "hidden lg:flex",
                    )}
                  >
                    {isLastCol ? (
                      <div class="flex max-h-8 text-white">
                        <PanfactumLogo />
                      </div>
                    ) : (
                      companyName
                    )}
                  </div>
                );
              })}
            </div>
          );
        } else {
          return (
            <div class="flex">
              {data.map((content, colNum) => {
                const isFirstCol = colNum === 0;
                const isLastCol = colNum === 3;
                return (
                  <div
                    class:list={clsx(
                      cellStyle,
                      "py-3",
                      isFirstCol
                        ? "text-display-xs font-semibold lg:basis-1/3"
                        : "grow lg:grow-0 lg:basis-1/4",
                      isLastCol
                        ? ["lg:font-semibold", getPFRowStyleByIndex(rowNum)]
                        : getRowStyleByIndex(rowNum),
                      !isLastCol && !isFirstCol && "hidden lg:flex",
                    )}
                  >
                    {content}
                  </div>
                );
              })}
            </div>
          );
        }
      })
    }
  </div>
</SubSection>
