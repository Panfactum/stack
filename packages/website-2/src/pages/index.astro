---
import "../styles/global.css";
import Layout from "../layouts/Layout.astro";

import Hero from "@/components/typography/hero.astro";
import HeadingWide from "@/components/typography/heading-wide.astro";
import { Button } from "@/components/ui/button";
import Badge from "@/components/astro/badge/badge.astro";
import BadgeSmall from "@/components/astro/badge/badge-small.astro";

import { faDiscord } from "@fortawesome/free-brands-svg-icons";
import { faCircleCheck } from "@fortawesome/free-regular-svg-icons";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";

import HeroSection from "../components/layout/hero-section.astro";
import SectionFullWidth from "../components/layout/section-full-width.astro";
import Section from "../components/layout/section.astro";
import { faArrowRight } from "@fortawesome/free-solid-svg-icons";

import FaqAccordions from "@/components/astro/accordion/faq-accordion.astro";
import SectionKicker from "@/components/astro/section/section-kicker.astro";
import SectionTitle from "@/components/astro/section/section-title.astro";
import SectionContent from "@/components/astro/section/section-content.astro";
import { ListBlock, FeatureListBlock } from "@/components/ListBlock";
import { GetStarted } from "@/components/marketing/GetStarted";

import CircleSVG from '@/components/svg/Circle';
import RootOrbitSVG from '@/components/svg/RootOrbit';
import RootOrbitSVG_02 from '@/components/svg/RootOrbit_02';
import "./landing.css";
import "./animation.css";
import LandingAnimation from "@/components/LandingAnimation.astro";
import MasonryLayout from "@/components/MasonryLayout";
import VariableSizeMasonry from "@/components/DndGrid/VariableSizeMasonry";
import ReplacedServicesSection from "@/components/ReplacedServices/ReplacedServicesSection.astro";
import TestimonySection from "@/components/testimony/TestimonySection";
import ComparisonSection from "./_index/ComparisonSection.astro";
import PricingSection from "./_index/PricingSection.astro";
import {PanfactumLogo} from "../components/panfactum-logo";
import {PanfactumMarkWhite} from "../components/panfactum-mark";

import React from "react";

const IMAGES = [
  [
    {
      url: "/odeao-labs.png",
      alt: "Odeao Labs",
      class:
        "h-[36px] md:h-[48px] dark:filter dark:grayscale dark:invert justify-self-center",
    },
    {
      url: "/kintsugi.png",
      alt: "Kintsugi",
      class:
        "h-[36px] md:h-[48px] dark:filter dark:grayscale dark:invert justify-self-center",
    },
  ],
  [
    {
      url: "/stacked.png",
      alt: "Stacked",
      class:
        "h-[36px] md:h-[48px] dark:filter dark:grayscale dark:invert justify-self-center",
    },
    {
      url: "/magnolia.png",
      alt: "Magnolia",
      class:
        "h-[36px] md:h-[48px] dark:filter dark:grayscale dark:invert justify-self-center",
    },
  ],
  [
    {
      url: "/warpspeed.png",
      alt: "Warpspeed",
      class:
        "h-[36px] md:h-[48px] dark:filter dark:grayscale dark:invert justify-self-center",
    },
  ],
];

const FEATURES = [

  {
    icon: "dollar",
    title: "Cost Savings",
    content:
      "Hyper-optimized to provide the lowest workload costs when running Kubernetes on AWS. Save up to 90% compared to the default EKS setup.",
  },
  {
    icon: "shield",
    title: "Security",
    content:
      "RBAC, zero-trust networking, automatically rotating credentials, audit logging, self-hosted identity provider w/ SSO integrations.",
  },
  {
    icon: "power",
    title: "High Availability",
    content:
      "Up to 99.999% uptime attainment with resiliency for datacenter outages. Achieve 99.999999999% data durability.",
  },
  {
    icon: "database",
    title: "Databases",
    content:
      "Modules for the most popular databases: PostgreSQL, Redis, NATS",
  },
  {
    icon: "code",
    title: "DevShell",
    content:
      "Purpose-built local environment for managing your cloud infrastructure. Support for Linux, MacOS, and Windows.",
  },
  {
    icon: "ci-cd",
    title: "CI / CD",
    content:
      "10x faster image builds than GitHub actions at 10% the price. Out-of-the-box configurations of infrastructure-as-code deployment pipelines.",
  },
  {
    icon: "eye",
    title: "Monitoring and Observability",
    content:
      "A full self-hosted monitoring suite that includes metrics, logging, tracing, synthetic tests, and alerting.",
  },
  {
    icon: "qrCode",
    title: "Infrastructure-as-Code",
    content:
      "All your infrastructure, fully codified. Be ready for SOC 2 Type 2, HITRUST, and ISO 27001.",
  },
  {
    icon: "flag",
    title: "Open Source",
    content:
      "Built exclusively on the most popular open-source tooling and standards. Infinitely extendable with no risk of vendor-lock.",
  },
];

const GUARANTEES = [
  "Access to base features",
  "Basic reporting and analytics",
  "Up to 10 individual users",
  "20GB individual data each user",
  "Basic chat and email support",
];
---

<Layout
  darkBackground={true}
  heroClass="bg-brand-section lg:bg-hero-pattern bg-[center_top] bg-cover bg-no-repeat"
  isFixed={false}
  hasBorder={false}
>
  <HeroSection
    slot="hero"
    class="flex space-y-6xl flex-col items-center "
  >
    <div
      class="container flex flex-col items-center space-y-6xl px-container-padding-mobile xl:px-container-padding-desktop"
    >
      <div
        class="flex flex-col gap-3xl items-center text-center md:max-w-[888px]"
      >
          <PanfactumLogo className="hidden sm:inline-block text-white"/>
          <PanfactumMarkWhite className="inline-block sm:hidden max-w-[108px]"/>
        <p
          class="text-tertiary_on-brand text-lg md:text-xl max-w-[600px] dark:text-[#94969C]"
        >
          Cut costs by up to 90% and improve your system capabilities, resiliency, and security with the #1 open-source
          framework for managing your cloud infrastructure.
        </p>
      </div>

      <div class="flex gap-x-lg">
        <Button variant="secondary-gray" size="xl">
          <FontAwesomeIcon
            icon={faDiscord}
            className="!h-[18px] !w-[22.5px] text-[#7289DA]"
          />
          Connect
        </Button>
        <GetStarted size="xl" />
      </div>

      <div class="flex items-center justify-center flex-col">
        <div class="animation-cube flex items-center justify-center relative">
          <div>
            <div class="root-square-image flex items-center justify-center">
              <img src="animation/KuberImage.png" alt="Kuber" class="w-[256px] h-[256px]" />
            </div>
            <div class="absolute elevated-square-image is-elevated transform rotate-45">
              <div class="relative flex items-center gap-4">
                <img src="animation/PanfactumImage.png" alt="Panfactum-Image" class="flex-none w-[256px] h-[256px] z-10" />
                <div class="absolute -right-36 icon-rows-2 flex-none flex flex-col place-items-center">
                  <img src="animation/lock-key-icon.png" alt="lock-key-image" class="icon-1 w-[128px] h-[128px] z-50 transform -translate-x-[135px]" />
                  <img src="animation/argo-icon.png" alt="argo-image" class="icon-2 w-[128px] h-[128px] z-50 transform -translate-x-[135px]" />
                </div>
              </div>
              <div class="absolute -bottom-36 icon-rows-1 flex justify-start">
                <img src="animation/RedisImage.png" alt="redis-image" class="icon-3 w-[128px] h-[128px] transform -translate-y-[135px]" />
                <img src="animation/FerrisWheelImage.png" alt="ferris-wheel-image" class="icon-4 w-[128px] h-[128px] transform -translate-y-[135px]" />
              </div>
            </div>
          </div>

          <script>
            const upDownImages = [
              'animation/lock-key-icon.png',
              'animation/RedisImage.png',
              'animation/FerrisWheelImage.png',
              'animation/argo-icon.png',
            ];

            // Get all image elements
            const imgElements = Array.from(document.querySelectorAll('.elevated-square-image [class^="icon-"]'));

            // Ensure the initial images are unique
            imgElements.forEach((imgElement, index) => {
              const image = upDownImages.shift(); // Get an image
              imgElement.src = image; // Assign it to the current card
            });

            // Handle `animationiteration` with image rotation
            imgElements.forEach((imgElement) => {
              imgElement.addEventListener('animationiteration', () => {
                // Remove the current image from the array
                const currentImage = imgElement.src;
                upDownImages.push(currentImage); // Check the current image back in

                // Assign a new image
                const newImage = upDownImages.shift(); // Get the next image
                imgElement.src = newImage; // Assign it to the current card
              });
            });
          </script>

          <div class="svg-container absolute z-20">
            <div class="circling-icons absolute w-[512px] h-[512px] z-50">
              <div class="icon-1 is-circle-icon absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <img src="animation/circle-icon-1.png" alt="circle-icon-1" class="w-[64px]" />
              </div>
              <div class="icon-2 is-circle-icon absolute left-0 top-[37%] transform translate-y-1/2 -translate-x-1/2">
                <img src="animation/circle-icon-2.png" alt="circle-icon-1" class="w-[64px]" />

              </div>
              <div class="icon-3 is-circle-icon absolute right-0 top-[37%] transform translate-y-1/2 translate-x-1/2">
                <img src="animation/circle-icon-3.png" alt="circle-icon-1" class="w-[64px]" />

              </div>
              <div class="icon-4 is-circle-icon absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2">
                <img src="animation/circle-icon-4.png" alt="circle-icon-1" class="w-[64px]" />

              </div>
            </div>
            <div class="rotating-svg">
              <RootOrbitSVG_02 />
            </div>
          </div>
        </div>

      </div>
    </div>
  </HeroSection>

  <Section>
    <h2 class="font-machina text-primary text-display-md sm:text-display-lg mb-2 tracking-tighter text-center">
      The Panfactum Framework
    </h2>
    <p class="sm:text-lg text-tertiary my-0 max-w-2xl">
        An integrated set of infrastructure-as-code modules, local tooling, and comprehensive guides focused on providing a
        self-hosted architecture that enables you to:
    </p>
      <ul class="sm:text-lg text-tertiary max-w-2xl list-disc list-inside px-4 pt-2 flex flex-col gap-2">
          <li>Quickly setup and production-harden your Amazon Web Services (AWS) and Kubernetes systems</li>
          <li>Safely and easily deploy over 100 open-source utilities that replace expensive, proprietary managed services</li>
          <li>Extend the system using familiar tooling and open standards such as OpenTofu/Terraform, Nix, and Kubernetes</li>
      </ul>

  </Section>

  <Section class="gap-6xl text-primary">
    <div class="text-center">
      <SectionKicker onBrand={true} class="mb-2"> Features </SectionKicker>
      <SectionTitle class="max-w-[768px] leading-tight">
        Production-ready from day one
      </SectionTitle>
    </div>

    <div class="flex flex-col sm:grid sm:grid-cols-2 md:grid-cols-3 gap-5xl">
      {
        FEATURES.map((item) => (
          <FeatureListBlock
            icon={item.icon}
            title={item.title}
            content={item.content}
          />
        ))
      }
    </div>
  </Section>

  <section class={`hidden md:flex flex-col items-center py-7xl`}>
    <Section class={`gap-7xl text-primary`}>
      <div class="text-center flex flex-col mb-16">
        <SectionKicker onBrand={true}> Managed Services </SectionKicker>
        <SectionTitle class="max-w-[768px] mx-auto">
          What does this replace?
        </SectionTitle>
        <SectionContent class="max-w-[768px] mx-auto">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
          eiusmod tempor incididunt ut labore et dolore magna aliqua.
        </SectionContent>
      </div>
    </Section>
    <ReplacedServicesSection />
  </section>

  <section class={`dark flex flex-col items-center py-7xl bg-secondary`}>
    <h2 class="font-machina text-primary text-display-lg mb-2 tracking-tighter">
      The Panfactum Group
    </h2>
    <p class="text-xl text-tertiary my-0">
      You focus on shipping software. We handle your cloud infrastructure.
    </p>
    <PricingSection />
    <ComparisonSection />

    <TestimonySection client:only="react" />
  </section>

  <Section sectionClass="dark max-w-none bg-primary" class="text-center gap-y-4xl text-primary">
    <div class="bg-brand-800 rounded-lg p-7xl flex flex-col items-center justify-center w-full max-w-[1216px] mx-auto">
      <div class="flex items-center mb-6">
        <div class="left-leaves">
          <img src="./leaves-left.svg" alt="left wreath" class="w-full" />
        </div>
        <div class="flex flex-col items-center justify-center">
          <div class="flex items-center justify-center">
            {
              Array.from({ length: 5 }, (_, i) => (
                <img src="./star.svg" alt="star" class="w-2xl" />
              ))
            }
          </div>
          <p class="text-sm font-semibold text-white">
            Will Save You Money or Else
          </p>
          <p class="text-xs font-medium text-[#cecfd2]">2,000 + reviews</p>
        </div>
        <div class="right-leaves">
          <img src="./leaves-right.svg" alt="left wreath" class="w-full" />
        </div>
      </div>

      <p
        class="font-machina text-display-md font-semibold text-primary_on-brand"
      >
        The Panfactum Guarantee
      </p>

      <p class="text-xl font-regular mb-8" style={{ color: "#cecfd2" }}>
        Join over 4,000+ startups already growing with Untitled.
      </p>

      <div class="flex flex-col items-center justify-center gap-4 mb-8">
        {
          GUARANTEES.map((item, guaranteeIndex) => (
            <div
              id={`garantees-item-${guaranteeIndex}`}
              class="grid grid-cols-10 gap-4 w-[300px]"
            >
              <div class="col-span-1">
                <svg
                  width="22"
                  height="23"
                  viewBox="0 0 22 23"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M6.5 11.7812L9.5 14.7812L15.5 8.78125M21 11.7812C21 17.3041 16.5228 21.7812 11 21.7812C5.47715 21.7812 1 17.3041 1 11.7812C1 6.2584 5.47715 1.78125 11 1.78125C16.5228 1.78125 21 6.2584 21 11.7812Z"
                    stroke="white"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>
              <div class="col-span-9 text-left">
                <p class="text-md font-regular text-secondary_on-brand">
                  {item}
                </p>
              </div>
            </div>
          ))
        }
      </div>

      <div class="flex items-center justify-center gap-x-4">
        <Button className="bg-brand-900" size="lg" style={{ color: "#cecfd2" }}
          >Learn more</Button
        >
        <Button variant="primary">Get started</Button>
      </div>
    </div>
  </Section>

  <Section class="gap-6xl">
    <div class="text-center">
      <SectionTitle> Frequently asked questions </SectionTitle>
      <SectionContent>
        Everything you need to know about the product and billing.
      </SectionContent>
    </div>

    <div class="md:max-w-xl w-full">
      <FaqAccordions />
    </div>

    <div
      class="flex flex-col items-center gap-y-xl bg-secondary w-full py-4xl px-2xl text-center rounded-xl"
    >
      <img src="/face.png" class="w-16" />
      <h2 class="text-primary text-xl font-semibold">Still have questions?</h2>
      <p class="text-tertiary text-md md:text-lg max-w-[303px] md:max-w-none">
        Can’t find the answer you’re looking for? Please chat to our friendly
        team.
      </p>
      <Button variant="primary" className="text-md h-[48px]"
        >Get in touch</Button
      >
    </div>
  </Section>

  <SectionFullWidth sectionClass="bg-brand-section" class="gap-y-4xl">
    <div class="flex flex-col gap-xl text-center">
      <h2
        class="font-machina text-primary_on-brand text-display-sm font-medium"
      >
        Get started today
      </h2>
      <p class="text-tertiary_on-brand text-lg">
        Join over 4,000+ startups already growing with Panfactum.
      </p>
    </div>

    <div
      class="flex flex-col flex-col-reverse sm:flex-row gap-lg w-full justify-center"
    >
      <Button variant="secondary-gray" size="xl">
        <FontAwesomeIcon
          icon={faDiscord}
          className="!h-[18px] !w-[22.5px] text-[#7289DA]"
        />
        Connect
      </Button>
      <Button variant="primary" size="xl">Get started</Button>
    </div>
  </SectionFullWidth>
</Layout>
