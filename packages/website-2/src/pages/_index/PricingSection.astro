---
import { faCircleCheck } from "@fortawesome/free-regular-svg-icons";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import SectionContent from "../../components/astro/section/section-content.astro";
import { Button } from "../../components/ui/button";
import SectionTitle from "../../components/astro/section/section-title.astro";
import Section from "../../components/layout/section.astro";

const PRICES = [
  {
    type: "Cloud Setup",
    popular: false,
    price: 500,
    subtitle:
      "Best for early-stage companies without a significant infrastructure footprint.",
    featureList: [
      "End-to-end setup, management, and maintenance of your Panfactum framework deployment",
      "Configuration and deployment of your containerized workoads",
      "Everything defined in infrastructure-as-code and connected to CI/CD pipelines",
      "Migration of your existing infrastructure with no hidden migration fees",
      "Asynchronous support for any questions, problems, or guidance",
    ],
  },
  {
    type: "Panfactum Kubernetes Cluster",
    popular: false,
    price: 750,
    subtitle:
      "Great for companies of all sizes who want a production-hardened infrastructure platform that Just Worksâ„¢.",
    featureLabel: `Starter`,
    featureList: [
      "Free assessment with infrastructure cost savings guarantee",
      "Dedicated solutions engineer",
      "On-call support",
      "Regular trainings",
      "Customized monitoring and alerting suite",
      "Audit and compliance support",
    ],
  },
  {
    type: "Workload Deployment",
    popular: false,
    price: 250,
    subtitle:
      "For those looking to run their infrastructure on bare metal for maximum cost savings.",
    featureLabel: `Growth`,
    featureList: [
      "Support for bare metal infrastructure",
      "Custom enhancements to the Panfactum framework",
    ],
  },
];

const moneyFormatter = new Intl.NumberFormat("en-US", {
  style: "currency",
  currency: "USD",
  trailingZeroDisplay: "stripIfInteger",
});
---

<Section class="gap-y-4xl py-4xl text-primary mb-8">
  <div class="text-center">
    <SectionTitle> Support Plans that Fit Your Needs </SectionTitle>
  </div>

  <div
    class="sm:flex justify-between self-stretch shadow-md px-3xl pt-4xl pb-3xl border border-secondary rounded-md bg-primary"
  >
    <div class="flex items-start justify-between">
      <div>
        <h1 class="font-machina text-primary text-display-xs font-medium">
          The Panfactum Framework
        </h1>
        <p class="text-tertiary text-md">
          Our full infrastructure framework is completely free and open source.
          No support plan needed.
        </p>
      </div>

      <span
        class="sm:hidden text-display-md font-medium font-machina text-primary leading-none"
      >
        Free
      </span>
    </div>
    <span
      class="hidden sm:block self-start text-display-md font-medium font-machina text-primary leading-none"
    >
      Free
    </span>
  </div>

  <div
    class="flex flex-col self-stretch md:grid md:grid-cols-2 lg:grid-cols-3 gap-xl"
  >
    {
      PRICES.map((price) => (
        <div class="self-stretch shadow-md px-3xl pt-4xl pb-3xl border border-secondary rounded-md bg-primary">
          <div class="flex flex-col self-start gap-4xl">
            <div class="flex flex-col gap-y-xl">
              <div class="flex justify-between">
                <h1 class="text-tertiary text-lg font-medium">{price.type}</h1>
                {price.popular && (
                  <div class="flex items-center justify-center font-medium rounded-full h-[24px] border border-[#9AD3F1] bg-[#E6F4FC] dark:bg-[transparent] dark:text-[#70BFEB] px-2.5">
                    Popular
                  </div>
                )}
              </div>

              <div class="flex gap-xs items-baseline">
                {price.price ? (
                  <>
                    <span class="text-display-md md:text-display-lg font-medium font-machina text-primary">
                      {moneyFormatter.format(price.price)}
                    </span>
                    <span class="text-md font-medium text-tertiary">
                      {" "}
                      / month{" "}
                    </span>
                  </>
                ) : (
                  <span class="text-display-md md:text-display-lg font-medium font-machina text-primary">
                    Contact Us
                  </span>
                )}
              </div>
              <p class="text-tertiary text-md">{price.subtitle}</p>
            </div>
          </div>

          <div class="flex flex-col py-4xl px-3xl gap-3xl">
            <div class="flex flex-col gap-y-xs">
              <h4 class="text-md font-semibold">Plan includes</h4>
              {price.featureLabel && (
                <p class="text-tertiary">
                  Everything in <strong>{price.featureLabel}</strong> plus ...
                </p>
              )}
            </div>
            <div class="flex flex-col gap-y-xl">
              {price.featureList.map((feature) => (
                <div class="flex gap-x-lg items-center">
                  <div class="text-[#2F688E]">
                    <FontAwesomeIcon icon={faCircleCheck} size="xl" />
                  </div>
                  <span>{feature}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      ))
    }
  </div>
</Section>
