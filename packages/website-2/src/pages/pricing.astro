---
import '../styles/global.css'
import Layout from '../layouts/Layout.astro'
import Section from '../components/layout/section.astro'

import { Button } from '@/components/ui/button'
import { PricingTable } from '@/components/pricing/pricing-table'
import { faIdBadge } from '@fortawesome/free-regular-svg-icons'
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { Faq } from '../components/marketing/faq'

import Calculator from '@/components/pricing/calculator'
import Spacer from '@/components/ui/spacer'
import SectionFullWidth from '@/components/layout/section-full-width.astro'
import FaqAccordions from '@/components/astro/accordion/faq-accordion.astro'
import SectionKicker from '@/components/astro/section/section-kicker.astro'
import SectionTitle from '@/components/astro/section/section-title.astro'
import { FeatureListBlock } from '@/components/ListBlock'
import SectionContent from '@/components/astro/section/section-content.astro'

const pathname = new URL(Astro.request.url).pathname

const DISCOUNTS = [
  {
    icon: 'chat-bubble',
    title: 'Annual Payment',
    content:
      '15% off for customers who pay annually. Does not include one-time services.',
  },
  {
    icon: 'thunder-bolt',
    title: 'Panfactum Partners',
    content:
      'Up to 50% off for service providers implementing the Panfactum Stack for their clients. Learn more.',
  },
  {
    icon: 'bar-chart-break',
    title: 'Non-profits',
    content:
      '50% off for registered non-profit organizations. Does not include one-time services.',
  },
]
---

<Layout title="Pricing" darkBackground={true} heroClass="bg-brand-section" hasBorder={false}>
  <section slot="hero" class="flex space-y-7xl flex-col items-center py-9xl">
    <div
      class="container flex flex-col items-center space-y-6xl px-container-padding-mobile xl:px-container-padding-desktop"
    >
      <div class="flex flex-col gap-2xl items-center text-center max-w-[846px]">
        <h1
          class="font-machina font-medium text-primary_on-brand text-display-md md:text-display-lg leading-none"
        >
          Pricing
        </h1>
        <p class="text-tertiary_on-brand text-lg md:text-xl pt-0">
          Something outrageous about pricing
        </p>
      </div>
    </div>
  </section>
  <Section sectionClass="-translate-y-1/2 pb-0">
    <div
      class="flex justify-between self-stretch shadow-md px-3xl pt-3xl pb-3xl border border-secondary rounded-md bg-primary"
    >
      <div class="self-start">
        <h1 class="font-machina text-display-xs font-medium">Open Source</h1>
        <p class="text-tertiary text-md">
          Our most popular plan for small teams. testing
        </p>
      </div>
      <span
        class="self-end text-display-sm md:text-display-md font-medium font-machina"
      >
        Free
      </span>
    </div>
  </Section>
  <Section sectionClass="pt-0">
    <h2 class="font-machina text-display-md md:text-display-lg font-medium">
      Support Plans
    </h2>
    <p class="text-tertiary text-center text-lg md:text-xl">
      Simple, transparent pricing that grows with you. Try any plan free for 30
      days.
    </p>
  </Section>
  <Section class="gap-y-6xl">
    <PricingTable client:only="react" />

    <table class="w-full">
      <thead>
        <tr>
          <th
            colspan="3"
            class="h-[72px] text-primary text-lg font-semibold border border-secondary p-2xl lg:p-3xl text-start"
            >Addons</th
          >
        </tr>
      </thead>
      <tbody class="text-secondary text-sm">
        <tr class="h-[64px]">
          <td
            class="border border-secondary py-xl px-3xl font-bold w-1/2 lg:w-3/4"
            >Audit Support (SOC2)</td
          >
          <td class="border border-secondary py-xl px-3xl bg-secondary w-1/2"
            >One month pricing / audit</td
          >
        </tr>

        <tr>
          <td class="border border-secondary py-xl px-3xl font-bold"
            >Upgrade to 24/7 Support (only available on Growth)</td
          >
          <td class="border border-secondary py-xl px-3xl bg-secondary"
            >$1,500 / month</td
          >
        </tr>

        <tr>
          <td class="border border-secondary py-xl px-3xl font-bold"
            >Upgrade to On-call SLA (15-minute) (only available on Growth)</td
          >
          <td class="border border-secondary py-xl px-3xl bg-secondary"
            >$1,500 / month</td
          >
        </tr>

        <tr>
          <td class="border border-secondary py-xl px-3xl font-bold"
            >Liability Insurance</td
          >
          <td class="border border-secondary py-xl px-3xl bg-secondary"
            >Per engagement</td
          >
        </tr>
      </tbody>
    </table>
  </Section>

  <SectionFullWidth
    sectionClass="gap-7xl bg-secondary text-primary py-8"
    class="gap-6xl"
  >
    <div class="text-center">
      <SectionKicker class="text-brand-secondary mb-2"
        >Ways to save</SectionKicker
      >
      <SectionTitle>Available Discounts</SectionTitle>
    </div>

    <div class="flex flex-wrap justify-center gap-5xl">
      {
        DISCOUNTS.map((item) => (
          <FeatureListBlock
            icon={item.icon}
            title={item.title}
            content={item.content}
          />
        ))
      }
    </div>
  </SectionFullWidth>

  <Section class="gap-6xl text-primary">
    <div class="text-center">
      <h3 class="text-brand-secondary text-sm font-semibold">Pricing</h3>
      <h2 class="font-machina text-display-md lg:text-display-lg font-medium">
        Savings Calculator
      </h2>
    </div>

    <Calculator client:only="react" pathName={pathname} />
  </Section>

  <Spacer className={''} />

  <Section class="gap-6xl py-8">
    <div class="text-center">
      <SectionTitle> Frequently asked questions </SectionTitle>
      <SectionContent>
        Everything you need to know about the product and billing.
      </SectionContent>
    </div>

    <div class="md:max-w-xl w-full">
      <FaqAccordions />
    </div>

    <div
      class="flex flex-col items-center gap-y-xl bg-secondary w-full py-4xl px-2xl text-center rounded-xl"
    >
      <img src="/face.png" class="w-16" />
      <h2 class="text-primary text-xl font-semibold">Still have questions?</h2>
      <p class="text-tertiary text-md md:text-lg max-w-[303px] md:max-w-none">
        Can’t find the answer you’re looking for? Please chat to our friendly
        team.
      </p>
      <Button variant="primary" className="text-md h-[48px]"
        >Get in touch</Button
      >
    </div>
  </Section>
</Layout>
